<?xml version="1.0"?>
<!--
  =======================================================================
  Build instruction of tracker, Generated by SilkPage.
  To build the site for preview, type in 'ant preview' on the command line
  For Online documentation, http://silkpage.markupware.com/docs/
  =======================================================================
-->

<project name="tracker" default="preview">
<property file="build.properties"/>
 <!--
       ===================================================================
       preview        		     
       ===================================================================
  -->
<target name="preview" depends="cleanOutput"
   description="generates and installs a local copy for preview">
	<echoproperties></echoproperties>
   <ant antfile="${silkpage.home.dir}/src/xml/build/tasks.xml"
     dir="${silkpage.home.dir}" inheritAll="false" target="website">
     <property file="build.properties"/>
   </ant>
</target>
 <!--
       ===================================================================
       publish        		     
       ===================================================================
  -->
<target name="publish" depends="metadata,preview"
   description="publishes a copy of your website online">
   <ant antfile="${silkpage.home.dir}/src/xml/build/tasks.xml"
     dir="${silkpage.home.dir}" inheritAll="false" target="uploadWebsite">
     <property file="build.properties"/>
   </ant>
</target>

 <!--
       ===================================================================
       metadata
       ===================================================================
  -->
<target name="metadata"
        description="generates RDF metadata for each XML source">
  <ant antfile="${silkpage.home.dir}/src/xml/build/tasks.xml"
       dir="${silkpage.home.dir}" inheritAll="false" target="websiteMetadata">
     <property file="build.properties"/>
   </ant>
</target>
	
	<!-- ================================= 
          target: deploy.to.local.repo.dir              
         ================================= -->
    <target name="deploy.to.local.repo.dir" depends="preview, cleanRepo" description="Deploy the site to the localRepoDir">
    	<tstamp>
    	    <format property="TODAY_DATE" pattern="d-MMMM-yyyy" />
    	</tstamp>
    	<echo>toDir=${local.dir.to.sync}  fromDir=${dist.dir}</echo>
    	
    	<copy todir="${local.dir.to.sync}">
    	    <fileset dir="${dist.dir}"/>
    	 </copy>
    	
    </target>

	
	<!-- - - - - - - - - - - - - - - - - - 
          target: cleanOutput                      
         - - - - - - - - - - - - - - - - - -->
    <target name="cleanOutput">
            <delete dir="${default.temp.dir}"/>
    </target>
	
	<!-- - - - - - - - - - - - - - - - - - 
	          target: cleanRepo      
	          <fileset dir="${user.dir}/s3" excludes="Tracker/"/>               
	 	- - - - - - - - - - - - - - - - - -->
	 <target name="cleanRepo">
	 	<echoproperties></echoproperties>
		<delete verbose="true" includeemptydirs="true">
			<fileset dir="${local.dir.to.sync}">
			    <exclude name="Tracker/**"/>
			</fileset>
		</delete>
	 </target>


</project>
