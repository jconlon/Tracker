<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>

<!--
 <copyright>
 </copyright>

 $Id$
-->

<plugin>
  <extension
    point = "org.eclipse.ui.newWizards">
    
    <category
          id="com.verticon.tracker.editor.Wizard.category.examples"
          name="Tracker Examples"/> 
    
    <category
          id="com.verticon.tracker.editor.Wizard.category.ID"
          name="Tracker Wizards"/>
     
    <wizard
      id = "com.verticon.tracker.editor.presentation.TrackerModelWizardID"
      name = "%_UI_TrackerModelWizard_label"
      class = "com.verticon.tracker.editor.presentation.TrackerMainModelWizard"
      category = "com.verticon.tracker.editor.Wizard.category.ID"
      icon = "icons/full/obj16/TrackerModelFile.gif">
      <description>%_UI_TrackerModelWizard_description</description>
      <selection class = "org.eclipse.core.resources.IResource" />
    </wizard>
    
    <wizard
      id = "com.verticon.tracker.editor.presentation.TrackerTemplateWizardID"
      name = "%_UI_AnimalTemplateWizard_label"
      class = "com.verticon.tracker.editor.presentation.TrackerAnimalModelWizard"
      category = "com.verticon.tracker.editor.Wizard.category.ID"
      icon = "icons/full/obj16/AnimalModelFile.gif">
      <description>%_UI_AnimalTemplateWizard_description</description>
      <selection class = "org.eclipse.core.resources.IResource" />
    </wizard>
    
    <wizard
            name="Tracker Example Project"
            icon="icons/full/obj16/TrackerModelFile.gif"
            category="com.verticon.tracker.editor.Wizard.category.examples"
            class="com.verticon.tracker.editor.presentation.SampleTrackerProjectWizard"
            project="true"
            id="com.verticon.tracker.editor.wizards.NewTrackerProjectWizard">
         <description>
            Create a new Tracker Example Project
         </description>
      </wizard>
  </extension>


  <extension point = "org.eclipse.ui.editors">
    <editor
        id = "com.verticon.tracker.editor.presentation.TrackerEditorID"
        name = "%_UI_TrackerEditor_label"
        icon = "icons/full/obj16/TrackerModelFile.gif"
        extensions = "tracker, premises"
        class = "com.verticon.tracker.editor.presentation.TrackerEditor" 
        contributorClass="com.verticon.tracker.editor.presentation.TrackerActionBarContributor" >
    </editor>
  </extension>
  
  <extension point = "org.eclipse.ui.editors">
    <editor
        id = "com.verticon.tracker.editor.presentation.AnimalEditorID"
        name = "Animal Template Editor"
        icon = "icons/full/obj16/AnimalModelFile.gif"
        extensions = "animal"
        class = "com.verticon.tracker.editor.presentation.TrackerEditor" 
        contributorClass="com.verticon.tracker.editor.presentation.TrackerActionBarContributor" >
    </editor>
  </extension> 
  
  <extension
        id="Tracker"
        point="org.eclipse.core.runtime.products">
     <product
           application="org.eclipse.ui.ide.workbench"
           description="Tracker models animal event history within a premises"
           name="Tracker Animal Information Platform">
        <property
              name="windowImages"
              value="icons/verticon32.gif"/>
        <property
              name="aboutText"
              value="Tracker Animal Information Platform&#x0A;Version: {0}&#x0A;&#x0A;(c) Copyright Verticon, Inc. 2008.  All rights reserved. &#x0A;&#x0A;Visit http:/www.verticon.com&#x0A;&#x0A;Tracker is powered by Eclipse technology and includes Eclipse plugins that can be installed and used with other Eclipsr (3.4.1) based offerings."/>
        <property
              name="aboutImage"
              value="icons/tracker_lg.gif"/>
        <property
              name="startupForegroundColor"
              value="ADD8E6"/>
        <property
              name="startupProgressRect"
              value="62,400,515,15"/>
        <property
              name="startupMessageRect"
              value="7,225,441,20"/>
        <property
              name="appName"
              value="Tracker Animal Information Platform">
        </property>
        <property
              name="preferenceCustomization"
              value="plugin_customization.ini">
        </property>
        <property
              name="introTitle"
              value="Welcome to the Tracker Animal Information Manager">
        </property>
        <property
              name="introBrandingImageText"
              value="Tracker by Verticon, Inc.">
        </property>
        <property
              name="introDescription-overview"
              value="Tracker overview description here....">
        </property>
     </product>
  </extension>
  <extension
        point="org.eclipse.ui.decorators">
     <decorator
           adaptable="true"
           class="com.verticon.tracker.editor.decorators.TrackerTemplateDecorator"
           id="com.verticon.tracker.editor.decorator"
           label="Template"
           lightweight="true"
           state="true">
        <enablement>
           <and>
              <objectClass name="org.eclipse.core.resources.IResource"/>
              <objectState
                    name="name"
                    value="*.tracker"/>
              <objectState
                    name="persistentProperty"
                    value="com.vertion.tracker.fileType=template"/>
           </and>
        </enablement>
     </decorator>
  </extension>
  <extension
        point="org.eclipse.ui.preferencePages">
     <page
           class="com.verticon.tracker.editor.preferences.internal.TrackerEditorPreferencePage"
           id="com.verticon.tracker.prefs.view"
           name="Tracker">
     </page>
  </extension>
  
  <extension
        point="org.eclipse.core.runtime.preferences">
     <initializer
           class="com.verticon.tracker.editor.preferences.internal.PreferenceInitializer">
     </initializer>
  </extension>
  <extension
        point="org.eclipse.ui.perspectives">
     <perspective
           class="com.verticon.tracker.editor.perspective.PerspectiveFactory"
           id="com.verticon.tracker.perspective"
           icon="icons/full/obj16/TrackerModelFile.gif"
           name="Tracker">
     </perspective>
  </extension>
  <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension targetID="org.eclipse.ui.resourcePerspective">
         <perspectiveShortcut id="com.verticon.tracker.perspective"/>
      </perspectiveExtension>
   </extension>
  <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension targetID="com.verticon.tracker.perspective">
         <perspectiveShortcut id="org.eclipse.ui.resourcePerspective"/>
         <newWizardShortcut
               id="com.verticon.tracker.editor.presentation.TrackerModelWizardID">
         </newWizardShortcut>
         <newWizardShortcut
               id="com.verticon.tracker.editor.presentation.TrackerTemplateWizardID">
         </newWizardShortcut>
      </perspectiveExtension>
   </extension>
   
   <extension point="org.eclipse.ui.intro"> 
    <introProductBinding
        introId="org.eclipse.ui.intro.universal"
        productId="com.verticon.tracker.editor.Tracker">
    </introProductBinding>
    <intro
          class="org.eclipse.ui.intro.config.CustomizableIntroPart"
          id="com.verticon.tracker.editor.intro">
    </intro>
    <introProductBinding
          introId="com.verticon.tracker.editor.intro"
          productId="com.verticon.tracker.editor.Tracker">
    </introProductBinding>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            description="%_UI_commands_Tracker_category_description"
            id="com.verticon.tracker.editor.commands.Tracker.category"
            name="_UI_commands_Tracker_category_name">
      </category>
      
       <!-- 
         	Many of these commands have defaultHandler classes that have workarounds to 
         	activate on what could be an adapt condition on the 
         	activeEditor. All these classes can be simplified when the
         	
              https://bugs.eclipse.org/bugs/show_bug.cgi?id=201743
              Cannot get adapt working on an IAdaptable, fix is available 
              Eclipse in 3.5
              
              Here is an example handler of how it could work in 3.5.
              
             <handler
            	class="com.verticon.tracker.editor.commands.ImportTagIdsAsTemplateEventsHandler"
            	commandId="com.verticon.tracker.editor.commands.importTagIds.asTemplate.command">
             	<activeWhen>
    				<with variable="activeEditor">
         				<adapt type="com.verticon.tracker.editor.presentation.IPremisesProvider"/>
         	 	</activeWhen>
         	 </handler>
         	see handler class for workaround
         	-->
      <!-- Place Holder in Popups Command -->
      <command
             id="com.verticon.tracker.editor.menus.popupany"
             
             categoryId="com.verticon.tracker.editor.commands.Tracker.category"
             description="%_UI_commands_generic_select_description"
             name="%_UI_commands_generic_select_name">
      </command>
      
      <!-- Select Command -->
       <command
             id="com.verticon.tracker.fair.editor.commands.generic.select.command"
             defaultHandler="com.verticon.tracker.editor.handlers.GenericSelectInOutlineHandler"
             categoryId="com.verticon.tracker.editor.commands.Tracker.category"
             description="%_UI_commands_generic_select_description"
             name="%_UI_commands_generic_select_name">
      </command>
      
      <!-- TagIds Commands -->
      <command
            categoryId="com.verticon.tracker.editor.commands.Tracker.category"
            defaultHandler="com.verticon.tracker.editor.handlers.ImportTagIdsAsSelectedEventsHandler"
            description="%_UI_commands_importTagIds_asTemplate_description"
            id="com.verticon.tracker.editor.commands.importTagIds.asTemplate.command"
            name="%_UI_commands_importTagIds_asTemplate_name">
      </command>
      <command
            id="com.verticon.tracker.editor.commands.importTagIds.asSelected.command"
            defaultHandler="com.verticon.tracker.editor.handlers.ImportTagIdsAsSelectedEventsHandler"
            categoryId="com.verticon.tracker.editor.commands.Tracker.category"
            description="%_UI_commands_importTagIds_asSelected_description"
            name="%_UI_commands_importTagIds_asSelected_name">
      </command>
      
      <!-- Animal Commands -->
      <command
            id="com.verticon.tracker.editor.commands.animal.changeType.command"
            defaultHandler="com.verticon.tracker.editor.handlers.AnimalsChangeTypeOfHandler"
            categoryId="com.verticon.tracker.editor.commands.Tracker.category"
            description="%_UI_commands_animal_changeType_description"
            name="%_UI_commands_animal_changeType_name">
      </command>
      <command
            id="com.verticon.tracker.editor.commands.animal.addTemplateEvent.command"
            defaultHandler="com.verticon.tracker.editor.handlers.AnimalsAddTemplateEventHandler"
            categoryId="com.verticon.tracker.editor.commands.Tracker.category"
            description="%_UI_commands_animal_addTemplateEvent_description"
            name="%_UI_commands_animal_addTemplateEvent_name">
      </command>
      
      
      <!-- Event Commands -->
       <command
             id="com.verticon.tracker.editor.commands.event.modify.command"
             defaultHandler="com.verticon.tracker.editor.handlers.EventsModifyHandler"
             categoryId="com.verticon.tracker.editor.commands.Tracker.category"
             description="%_UI_commands_event_modify_description"
             name="%_UI_commands_event_modify_name">
      </command>
      
      
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <menu
               commandId="com.verticon.tracker.editor.menus.popupany"
               label="&amp;Tracker Actions">
         </menu>
      </menuContribution>  
      <menuContribution
            locationURI="popup:com.verticon.tracker.editor.menus.popupany">
        <!-- restrict this to command to adapt on IContentOutlinePage when  
               	https://bugs.eclipse.org/bugs/show_bug.cgi?id=201743
              		Scheduled for fix in 3.5 -->
               <command
                     commandId="com.verticon.tracker.fair.editor.commands.generic.select.command"
                     icon="icons/full/obj16/selected_mode.gif"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <iterate>
                        <instanceof
                              value="org.eclipse.emf.ecore.EObject">
                        </instanceof>
                     </iterate>
                  </visibleWhen>
               </command>
               
               <!-- TagIds -->
                <command
                      commandId="com.verticon.tracker.editor.commands.importTagIds.asTemplate.command"
                      icon="icons/full/obj16/import_wiz.gif"
                      style="push">
                  <visibleWhen>
		               <with variable="activeMenuSelection">
		                  <iterate>
		                      <adapt type="org.eclipse.core.resources.IResource">
		          					<test property="org.eclipse.core.resources.name" 
		               				 value="*.tags"/>
		      				 </adapt>
		                  </iterate>
		               </with>
	            </visibleWhen>
               </command>
               <command
                     commandId="com.verticon.tracker.editor.commands.importTagIds.asSelected.command"
                     icon="icons/full/obj16/import_wiz.gif"
                     style="push">
                     <visibleWhen>
		               <with variable="activeMenuSelection">
		                  <iterate>
		                      <adapt type="org.eclipse.core.resources.IResource">
		          					<test property="org.eclipse.core.resources.name" 
		               				 value="*.tags"/>
		      				 </adapt>
		                  </iterate>
		               </with>
	            </visibleWhen>
               </command>
               
               <!-- Animals -->
                <command
                      commandId="com.verticon.tracker.editor.commands.animal.changeType.command"
                      icon="icons/full/obj16/AnimalModelFile.gif"
                      style="push">
               	<visibleWhen>
               		<with variable="activeMenuSelection">
		                  <iterate>
      						 <instanceof value="com.verticon.tracker.Animal"/>
    					  </iterate>
    			     </with>
	            </visibleWhen>
               	</command>
               	<command
                      commandId="com.verticon.tracker.editor.commands.animal.addTemplateEvent.command"
                      icon="icons/full/obj16/AnimalModelFile.gif"
                      style="push">
               	<visibleWhen>
               		<with variable="activeMenuSelection">
		                  <iterate>
      						 <instanceof value="com.verticon.tracker.Animal"/>
    					  </iterate>
    			     </with>
	            </visibleWhen>
               </command>
               
               <!-- Event -->
                <command
                      commandId="com.verticon.tracker.editor.commands.event.modify.command"
                      icon="icons/full/obj16/waiting.gif"
                      style="push">
               	<visibleWhen>
                         <with variable="activeMenuSelection">
		                  <iterate>
      						 <instanceof value="com.verticon.tracker.Event"/>
    					  </iterate>
    					 </with>
	            </visibleWhen>
               	</command>
      </menuContribution>
     
      
   </extension>
   
   
</plugin>
